{% extends 'events_evaluation_base.html' %}{% load staticfiles %}{% load bootstrap3 %} {% load events_tags %}

{% block title %}{{ abstract.event.english_name }}: {{ abstract.title }}{% endblock %}

{% block content %}
<style>
h2{
  font-size: 20px;
  border: 1px solid #ebebeb;
  background-color: #f5f5f6;
  color: #a6a7aa;
  padding: 10px;
  text-align: center;
}
</style>
<div class="english-field">
<p class="alert alert-warning"><i class="fa fa-hourglass-half" aria-hidden="true"></i> This abstract is currently pending revision.</p>
{% if abstract.status == 'P' %}
<p class="alert alert-warning"><i class="fa fa-hourglass-half" aria-hidden="true"></i> This abstract is : {{ abstract.get_status_display }}</p>
{% endif %}
{% if abstract.status == 'A' %}
<p class="alert alert-success"> This abstract is : {{ abstract.get_status_display }}</p>
{% endif %}
{% if abstract.status == 'R' %}
<p class="alert alert-danger"> This abstract is : {{ abstract.get_status_display }}</p>
{% endif %}
{% include 'events/abstracts/partials/abstract_table.html' %}
<div class="row" style="margin-left: 0; margin-bottom: 5px; ">
{%  if abstract.status == 'A' %}
    {% if abstract.accepted_presentaion_preference == 'P' %}
        {% if  abstract.posters.exists %}
        {% else %}
            <h2>Accepted</h2>
            <h3><b>Congratulations!</b><br> Your abstract has been accepted.  We require all accepted abstract submitters to upload their poser image and powerpoint,make sure you have followed the poster template : </h3>
            <div class="submit" style="margin-left: 9%; margin-bottom: 10px; margin-right: 9%;">
            <form method="post" action="{% url 'events:show_abstract' event.code_name abstract.pk %}" enctype="multipart/form-data">
                {% csrf_token %}
                    <p>{{ form.non_field_errors }}</p>
                        <p>
                            Poster:
                            {{ form.poster.errors }}
                            {{ form.poster }}
                        </p>
                        <p>
                            Powerpoint:
                            {{ form.poster_powerpoint.errors }}
                            {{ form.poster_powerpoint }}
                        </p>
                <input type="submit" class="btn btn-success" value="submit">
            </form>
            </div>
        {% endif %}
    {% endif %}
    {% if abstract.accepted_presentaion_preference == 'O' %}
        {% if abstract.posters.exists %}
        {% else %}
            <h2>Accepted</h2>
                <h3><b>Congratulations!</b><br> Your abstract has been accepted.  We require all accepted abstract submitters to upload their presntation file: </h3>
                <div class="submit" style="margin-left: 9%; margin-bottom: 10px; margin-right: 9%;">
                <form method="post" action="{% url 'events:presntation_upload' event.code_name abstract.pk %}" enctype="multipart/form-data">
                    {% csrf_token %}
                        <p>{{ form.non_field_errors }}</p>
                            <p>
                                Upload presentation file:
                                {{ presentation_form.presentation_file.errors }}
                                {{ presentation_form.presentation_file }}
                            </p>

                    <input type="submit" class="btn btn-success" value="Click here">
                </form>
                </div>
        {% endif %}
    {% endif %}

{% endif %}
</div>

<div style="float: right;">
	<!-- <button id="edit-abstract" class="btn btn-icon btn-success">
			<i class="entypo-pencil"></i>
			Edit
	</button> -->
	<button data-url="{% url 'events:delete_abstract' event.code_name abstract.pk %}" class="confirm-delete-abstract btn btn-icon btn-danger">
			<i class="entypo-block"></i>
			Delete
	</button>
</div>
</div>



{% endblock %}

{% block customscript %}
<script src="{% static 'neon/assets/js/toastr.js' %}"></script>
<script type="text/javascript">
$(function(){
    $('#edit-abstract-modal').modal({
      keyboard: false,
      backdrop: 'static',
      show    : false,
    });
    $("button#edit-abstract").click(function () {
        $("#edit-abstract-modal").modal('show');
        $("#edit-abstract-modal .modal-title").html("Edit {{ abstract.title }}");
        $("#edit-abstract-modal .modal-body").load("{% url 'events:edit_abstract' event.code_name abstract.pk %}");
        var $submitButton = $("#edit-abstract-modal button.submit-button");
        $submitButton.off('click');
        $submitButton.click(function () {
            $("form#edit-abstract-form").submit();
        });
    });
});
{% include 'bulb/adjust_modal_size.js' %}
</script>
<style>
p{
    font-size: 17px;
}
</style>
{% with modal_id='edit-abstract-modal' %}
    {% include "events/abstracts/partials/common_edit_modal.html" %}
{% endwith %}
{% with model='abstract' %}
    {% include "events/abstracts/partials/delete_asset.html" %}
{% endwith %}
{% endblock %}
