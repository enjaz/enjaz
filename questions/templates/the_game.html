{% extends 'the_game_base.html' %}


{% block content %}




<div id="pre-game">
 <p> Hello to this Quick Quiz to start click here </p>

<button id = "hide"  class="btn btn-sm btn-danger">أبدء اللعبة </button>

</div>


<div id="start-game" style="display:none" >

</div>
<button data-action="next" id="button"  class="btn btn-sm btn-danger" style="display:none">السؤال التالي </button>

     {# would be better if remove instead of hide #}

 <script type="text/javascript">
        $(function() {
            $("#hide").click(function () {
                $('#pre-game').hide();
                $('#start-game').show();
                $('#button').show();
            });
        });


        $(function(){
        $("#button").click(function(){
            action = $(this).data("action");
            $.ajax({
                url: "{% url 'questions:toggle_new_game' %}",
                type: 'POST',
                data: {action: action},
                cache: false,
                success: function (data) {
                    if (data.success) {
                        var counter = 1;
                        var questionsArray = data.questions;
                        var arrayLength = questionsArray.length;
                        for (var i = 0; i < arrayLength; i++) {
                            console.log();
                            var $thedive =  $('<div>').attr({
                                                type: 'visible',
                                                id: counter,
                                                name: 'question-div',
                                                question_pk:questionsArray[i].pk,
                                            }).appendTo('#start-game');
                            counter +=1;
                            var content = document.createTextNode(questionsArray[i].text);
                            $thedive.append(content);

                            var choices = questionsArray[i].choices;
                            var choicesLength = choices.length;
                            var lable_counter=1
                            for (var m = 0; m < choicesLength; m++) {
                            var $thelabel =  $('<label>').attr({
                                                type: 'visible',
                                                id: lable_counter,
                                            }).appendTo($thedive);
                            lable_counter +=1;
                            var $thechoice = $('<input>').attr({
                                                    type: 'radio',
                                                    game_pk:data.game_pk,
                                                    id:questionsArray[i].choices[m].pk,
                                                    counter:counter,
                                                    question_pk:questionsArray[i].pk,
                                                    name: 'question-choice'
                                                }).appendTo($thelabel);
                            var choice = document.createTextNode(questionsArray[i].choices[m].text);
                            $thechoice.append(choice);

                            }

                        }
                    }
                }
            });
        });

    });
        {# console.log(questionsArray[i]); #}
        {# alert(questionsArray[i]); #}

    </script>

{% endblock %}
